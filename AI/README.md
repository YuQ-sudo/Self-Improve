# 深度学习系统

<!-- https://github.com/chenzomi12/DeepLearningSystem -->

## learning route

* AI框架核心技术
* 底层编译技术
* 推理系统
* AI芯片

### AI框架核心技术

* 计算框架
  * Base DAG 
  * 数据流图表示计算逻辑和状态：节点（operator） 边（Tensor）
  * tensorflow 系统性能优先 vs pytorch 易用性优先
  * 设计特性领域语言（DSL）
* 自动微分
  * 常见的求导方法：手动求解 数值微分 符号微分 自动微分
    * 手动微分：链式法则 求解梯度公式
    * 数值微分法：通过有限差分近似完成求导。（舍入误差 截断误差 影响比较大）
    * 符号微分法：基于数学规则和程序表达式变换完成求导。
    * 自动微分法：介于数值微分和符号微分之间的方法，采用类似有向图的计算来求解微分值，介于数值微分和符号微分之间的一种求导方法。
      * 自动微分基于一个事实，每一个计算机程序无论多么复杂，都在执行加减乘除一系列基础运算以及指数、对数等初等函数运算。
      * 自动微分就是缓存 作用域基础算子的符号微分法结果，然后进行链式求导得到整个函数结果。依据运算逻辑吧公示整理出有向无环图。
      * 原始函数 建立计算图、数据正向传播、计算中间节点、记录
* 自动微分实现
  * 基本表达式
  * 操作符重载
  * 源代码转换
    * 源码转换法的优点可以总结如下：
      * 支持更多的数据类型（原生和用户自定义的数据类型） + 原生语言操作（基本数学运算操作和控制流操作）
      * 高阶微分中实现容易，不用每次使用 Tape 来记录高阶的微分中产生的大量变量，而是统一通过编译器进行额外变量优化和重计算等优化
      * 进一步提升性能，没有产生额外的 tape 数据结构和 tape 读写操作，除了利于实现高阶微分以外，还能够对计算表达式进行统一的编译优化
    * 源码转换法的缺点可以总结如下：
      * 实现复杂，需要扩展语言的预处理器、编译器或解释器，深入计算机体系和底层编译
      * 支持更多数据类型和操作，用户自由度虽然更高，但同时更容易写出不支持的代码导致错误
      * 微分结果是以代码的形式存在，在执行计算的过程当中，特别是深度学习中大量使用for循环过程中间错误了，或者是数据处理流程中出现错误，并不利于深度调试。
      <!-- https://zhuanlan.zhihu.com/p/385042207 -->
* 计算图优化
  * 图的角度与执行 常量折叠 常量传播 算子融合 表达式简化 表达式替换 公共子表达式消除等
  * 计算图单设备算子间的调度 根据计算图找到相互独立的算子进行并发调度，提高计算的并行性。
  * 计算图的切分 多设备进行计算